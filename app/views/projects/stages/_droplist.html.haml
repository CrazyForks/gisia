= turbo_frame_tag "stage-label-dropdown-options-#{stage.id}" do
  - if labels.any?
    - labels.each do |label|
      - is_selected = selected_ids.include?(label.id.to_s)
      %div{ id: "label-#{stage.id}-#{label.id}", class: "px-3 py-1 bg-white hover:bg-slate-100 cursor-pointer border-b border-slate-100 last:border-b-0 flex items-center justify-between", data: { action: 'click->stage-label-search#selectLabel', label_id: label.id } }
        %div{ class: 'flex items-center gap-2' }
          %div{ class: 'w-3 h-3 rounded-full flex-shrink-0', style: "background-color: #{label.color}" }
          %span{ class: 'text-xs font-medium text-slate-900' }= label.title
        - if is_selected
          = icon 'check', class: 'w-3 h-3 text-blue-600'
