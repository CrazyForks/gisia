= form_with url: search_stage_labels_namespace_project_board_stage_path(project.namespace.parent.full_path, project.path, board, stage), method: :post, id: "board-stage-search-form-#{stage.id}", data: { turbo_frame: "stage-label-dropdown-options-#{stage.id}", stage_label_search_target: 'searchForm' }, style: 'display: none;' do |f|
  = f.hidden_field :q, data: { 'stage-label-search-target': 'queryInput' }
  = f.hidden_field :selected_ids, data: { 'stage-label-search-target': 'selectedIdsInput' }

%div{ class: 'space-y-0' }
  %input{ type: 'text', placeholder: 'Search labels...', class: 'w-full px-2 py-1.5 text-xs border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent', data: { action: 'input->stage-label-search#search', 'stage-label-search-target': 'queryInput' } }

  %div{ class: 'bg-slate-50 max-h-64 overflow-y-auto', data: { 'stage-label-search-target': 'dropdown' } }
  = render 'projects/stages/droplist', stage: stage, labels: [], selected_ids: selected_label_ids
