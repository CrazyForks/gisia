- url = webhook.new_record? ? webhooks_path(project) : namespace_project_settings_webhook_path(project.namespace.parent.full_path, project.namespace.path, webhook)
= form_with(model: webhook, url: url, local: false, class: 'space-y-6') do |form|
  - if webhook.errors.any?
    %div{class: 'bg-red-50 border border-red-200 rounded-lg p-4 mb-6'}
      %h2{class: 'text-red-800 font-semibold mb-2'}
        = pluralize(webhook.errors.count, "error")
        prohibited this webhook from being saved:
      %ul{class: 'list-disc list-inside text-red-700 text-sm space-y-1'}
        - webhook.errors.full_messages.each do |message|
          %li= message

  %div
    = form.label :url, class: 'block text-sm font-medium text-gray-900 mb-2'
    = form.text_field :url, class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent', placeholder: 'https://example.com/webhook'

  %div
    = form.label :name, 'Name (optional)', class: 'block text-sm font-medium text-gray-900 mb-2'
    = form.text_field :name, class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent', placeholder: 'Webhook name'

  %div
    = form.label :description, 'Description (optional)', class: 'block text-sm font-medium text-gray-900 mb-2'
    = form.text_area :description, rows: 3, class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent', placeholder: 'Webhook description'

  %div
    %p{class: 'block text-sm font-medium text-gray-900 mb-3'}
      Trigger
    %div{class: 'space-y-3'}
      %label{class: 'flex items-center gap-3 cursor-pointer'}
        = form.check_box :push_events, class: 'w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500'
        %span{class: 'text-sm text-gray-700'}
          Branch Push events
      %label{class: 'flex items-center gap-3 cursor-pointer'}
        = form.check_box :tag_push_events, class: 'w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500'
        %span{class: 'text-sm text-gray-700'}
          Tag push events

  %div{class: 'flex gap-3 pt-4'}
    = form.submit class: 'px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium'
    = link_to 'Cancel', webhooks_path(project), class: 'px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50'
