%div{class: 'p-6 hidden', 'data-collapsible-target': 'content'}
  = form_with model: @namespace_settings, url: namespace_project_settings_repository_path(@project.namespace.parent.full_path, @project.namespace.path), method: :patch, html: { class: 'space-y-4' } do |f|
    %div{class: 'space-y-2'}
      = f.label :default_branch_name, "Default branch name", class: 'block text-sm font-medium text-gray-700'
      %p{class: 'text-xs text-gray-500 mb-2'}
        Select the default branch from existing branches or leave empty for instance default.
      
      - if @project.repository.exists? && @project.repository.branch_names.any?
        = f.select :default_branch_name, options_for_select([['Use instance default', '']] + @project.repository.branch_names.map { |branch| [branch, branch] }, @namespace_settings.default_branch_name), {}, { class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent' }
      - else
        = f.text_field :default_branch_name, class: 'w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent', placeholder: 'main'
        %p{class: 'text-xs text-gray-400 mt-1'}
          Repository has no branches yet. Enter a branch name or leave empty for instance default.

    %div{class: 'pt-4 border-t border-gray-200'}
      = f.submit "Save changes", class: 'px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors'