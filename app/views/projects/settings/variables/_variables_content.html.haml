%div{id: 'variables_content', class: 'p-6', 'data-controller': 'variable-drawer'}
  - if @project.variables.any?
    %div{class: 'mb-4 flex justify-between items-center'}
      %h3{class: 'text-base font-medium text-gray-900'}
        Project Variables
      %button{type: 'button', class: 'btn btn-primary flex items-center gap-2', data: {action: 'variable-drawer#open', variable_drawer_target: 'openButton'}}
        = icon 'plus', class: 'w-4 h-4'
        %span Add variable
    %div{class: 'space-y-3'}
      - @project.variables.each do |variable|
        %div{class: 'flex items-center justify-between py-3 px-4 bg-gray-50 border border-gray-200 rounded-lg hover:bg-gray-100'}
          %div{class: 'flex items-center gap-4'}
            %div{class: 'flex items-center gap-2'}
              = icon 'key', class: 'w-4 h-4 text-gray-500'
              %code{class: 'font-mono text-sm font-medium text-gray-900'}
                = variable.key
            - if variable.protected?
              %span{class: 'inline-flex items-center px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full'}
                = icon 'shield', class: 'w-3 h-3 mr-1'
                Protected
            - if variable.masked?
              %span{class: 'inline-flex items-center px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full'}
                = icon 'eye-slash', class: 'w-3 h-3 mr-1'
                Masked
          %div{class: 'flex items-center gap-2'}
            = button_to namespace_project_settings_variable_path(@project.namespace.parent.full_path, @project.namespace.path, variable), method: :delete, remote: true, class: 'btn btn-sm btn-danger', title: 'Delete variable', data: { 'turbo-confirm': "Are you sure you want to delete the variable '#{variable.key}'?" } do
              = icon 'trash', class: 'w-4 h-4'
  - else
    %div{class: 'text-center py-12'}
      %div{class: 'w-16 h-16 mx-auto rounded-lg bg-gray-100 flex items-center justify-center mb-4'}
        = icon 'key', class: 'w-8 h-8 text-gray-400'
      %h4{class: 'text-lg font-medium text-gray-900 mb-2'}
        No variables defined
      %p{class: 'text-gray-600 mb-4'}
        Variables store values like API keys and tokens for use in CI/CD pipelines
      %button{type: 'button', class: 'btn btn-primary flex items-center gap-2', data: {action: 'variable-drawer#open', variable_drawer_target: 'openButton'}}
        = icon 'plus', class: 'w-4 h-4'
        %span Add your first variable

  %div{class: 'fixed inset-y-0 right-0 z-50 w-96 bg-white border-l border-gray-200 transform translate-x-full transition-transform duration-300 ease-in-out hidden', data: {variable_drawer_target: 'drawer'}}
    = render 'projects/settings/variables/drawer_form'