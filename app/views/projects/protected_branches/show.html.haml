- content_for :title, "Protected Branch Details"

%div{class: 'w-full bg-white p-2 rounded-lg'}
  %div{class: 'w-full max-w-6xl mx-auto'}

    %div{class: 'py-6'}
      %div{class: 'flex items-center gap-4 mb-6'}
        %div{class: 'w-16 h-16 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center text-white text-xl font-bold shadow-lg'}
          = icon 'git-branch', class: 'w-8 h-8'
        %div
          %h1{class: 'text-2xl font-bold text-gray-900'}
            Protected Branch: #{@protected_ref.name}
          %p{class: 'text-gray-600'}
            Branch protection settings and matching branches

      %div{class: 'grid grid-cols-1 lg:grid-cols-2 gap-6'}
        %div{class: 'bg-white border border-gray-200 rounded-lg p-6'}
          %h3{class: 'text-lg font-semibold text-gray-900 mb-4'}
            Protection Settings
          
          %div{class: 'space-y-3'}
            %div{class: 'flex justify-between'}
              %span{class: 'text-sm font-medium text-gray-600'}
                Access Level:
              %span{class: 'text-sm text-gray-900 px-2 py-1 bg-blue-100 rounded'}
                = @protected_ref.access_level.humanize

            %div{class: 'flex justify-between'}
              %span{class: 'text-sm font-medium text-gray-600'}
                Allow Push:
              = @protected_ref.allow_push? ? '‚úÖ Yes' : '‚ùå No'

            %div{class: 'flex justify-between'}
              %span{class: 'text-sm font-medium text-gray-600'}
                Allow Force Push:
              = @protected_ref.allow_force_push? ? '‚úÖ Yes' : '‚ùå No'

            %div{class: 'flex justify-between'}
              %span{class: 'text-sm font-medium text-gray-600'}
                Allow Merge:
              = @protected_ref.allow_merge_to? ? '‚úÖ Yes' : '‚ùå No'

        %div{class: 'bg-white border border-gray-200 rounded-lg p-6'}
          %h3{class: 'text-lg font-semibold text-gray-900 mb-4'}
            Matching Branches
          
          - if @matching_branches&.any?
            %div{class: 'space-y-2'}
              - @matching_branches.each do |branch_name|
                %div{class: 'flex items-center gap-2 px-3 py-2 bg-gray-50 rounded-md'}
                  = icon 'git-branch', class: 'w-4 h-4 text-gray-500'
                  %span{class: 'text-sm text-gray-700'}= branch_name
          - else
            %div{class: 'text-center py-8 text-gray-500'}
              %div{class: 'text-4xl mb-2'}üîç
              %p No branches match this protection rule

      %div{class: 'pt-6 border-t border-gray-200 flex gap-3'}
        = link_to 'Edit', edit_namespace_project_settings_repository_path(@project.namespace.parent.full_path, @project.namespace.path, anchor: 'protected-refs'), class: 'px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors'
        = link_to 'Back to Settings', edit_namespace_project_settings_repository_path(@project.namespace.parent.full_path, @project.namespace.path), class: 'px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-200 transition-colors'