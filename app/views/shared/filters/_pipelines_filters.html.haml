%div{ class: 'bg-gray-50 rounded-lg p-4 mb-6' }
  = form_tag url, method: :get, local: true, class: 'flex flex-wrap gap-4 items-end' do
    %div{ class: 'flex-1 min-w-64' }
      = label_tag :search, search_label, class: 'block text-sm font-medium text-gray-700 mb-1'
      = text_field_tag :search, params[:search], placeholder: search_placeholder, class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500', onkeypress: 'if(event.key==="Enter"){this.form.submit();}'
    
    - if defined?(statuses) && statuses.present?
      %div{ class: 'min-w-32' }
        = label_tag :status, 'Status', class: 'block text-sm font-medium text-gray-700 mb-1'
        = select_tag :status, options_from_collection_for_select([['All Statuses', '']] + statuses.map{|s| [s.humanize, s]}, :second, :first, params[:status]), class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500', onchange: 'this.form.submit();'
    
    - if defined?(refs) && refs.present?
      %div{ class: 'min-w-32' }
        = label_tag :ref, 'Branch/Tag', class: 'block text-sm font-medium text-gray-700 mb-1'
        = select_tag :ref, options_from_collection_for_select([['All Refs', '']] + refs.map{|r| [r, r]}, :second, :first, params[:ref]), class: 'w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500', onchange: 'this.form.submit();'